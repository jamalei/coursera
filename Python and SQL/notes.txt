(WORKING)
%%sql
select COMMUNITY_AREA_NUMBER, COUNT(COMMUNITY_AREA_NUMBER) as NUM_CRIMES_RECORDED
    from CHICAGO_CRIME_DATA
    group by COMMUNITY_AREA_NUMBER
    having COUNT(COMMUNITY_AREA_NUMBER) = (
        select MAX(NUM_CRIMES_RECORDED) from (
            select COMMUNITY_AREA_NUMBER, COUNT(COMMUNITY_AREA_NUMBER) as NUM_CRIMES_RECORDED
            from CHICAGO_CRIME_DATA
            group by COMMUNITY_AREA_NUMBER));



%%sql
select COMMUNITY_AREA_NUMBER, COUNT(COMMUNITY_AREA_NUMBER)
	from CHICAGO_CRIME_DATA
	group by COMMUNITY_AREA_NUMBER
	having COUNT(COMMUNITY_AREA_NUMBER) = (
		select MAX(NUM_CRIMES) from (
			select COMMUNITY_AREA_NUMBER, COUNT(COMMUNITY_AREA_CODE) as NUM_CRIMES
			from CHICAGO_CRIME_DATA
			group by COMMUNITY_AREA_NUMBER));


SELECT agent_code, COUNT(agent_code) 
FROM orders  GROUP BY agent_code 
HAVING COUNT (agent_code)=( 
SELECT MAX(mycount) 
FROM ( 
SELECT agent_code, COUNT(agent_code) mycount 
FROM orders 
GROUP BY agent_code));


%%sql
select COMMUNITY_AREA_NAME, HARDSHIP_INDEX
    from CENSUS_DATA
    where HARDSHIP_INDEX = (select MAX(HARDSHIP_INDEX) from CENSUS_DATA);